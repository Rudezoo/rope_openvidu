(this.webpackJsonprope=this.webpackJsonprope||[]).push([[0],{357:function(e,t,a){e.exports=a(639)},379:function(e,t,a){},546:function(e,t){},547:function(e,t){},548:function(e,t){},549:function(e,t){},550:function(e,t){},576:function(e,t,a){},583:function(e,t,a){},639:function(e,t,a){"use strict";a.r(t);var n,c=a(0),o=a.n(c),r=a(22),l=a.n(r),i=a(73),s=a(51),u=a(686),m=a(689),d=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(u.a,{icon:o.a.createElement(m.a,null),title:"\uc218\uace0\ud558\uc168\uc2b5\ub2c8\ub2e4!"}))},f=a(43),p=a.n(f),E=a(58),h=a(13),b=a(682),g=a(120),O=a(683),v=a(681),j=a(687),S=a(54),y=a(680),w=a(191),x=(a(379),a(690)),C=a(42),I=a.n(C),k=a(129),N=document.documentElement,D=function(e){var t=b.a.Text,a=Object(c.useState)(!0),r=Object(h.a)(a,2),l=r[0],i=r[1],s=Object(c.useState)(""),u=Object(h.a)(s,2),m=u[0],d=u[1],f=Object(c.useState)(""),C=Object(h.a)(f,2),D=C[0],T=C[1],P=Object(c.useState)(!1),M=Object(h.a)(P,2),A=M[0],_=M[1],R=Object(c.useState)(!1),F=Object(h.a)(R,2),V=F[0],L=F[1],z=Object(c.useState)("\uc2dc\ud5d8\uc744 \uc120\ud0dd\ud558\uc138\uc694"),B=Object(h.a)(z,2),U=B[0],Y=B[1],J=Object(c.useState)(0),q=Object(h.a)(J,2),K=q[0],H=q[1],W=Object(c.useState)([]),G=Object(h.a)(W,2),Q=G[0],X=G[1],Z=Object(c.useState)([]),$=Object(h.a)(Z,2),ee=$[0],te=$[1],ae=Object(c.useState)(!0),ne=Object(h.a)(ae,2),ce=ne[0],oe=ne[1],re=Object(c.useState)(""),le=Object(h.a)(re,2),ie=le[0],se=le[1],ue=Object(c.useState)(0),me=Object(h.a)(ue,2),de=me[0],fe=me[1],pe=Object(c.useState)(""),Ee=Object(h.a)(pe,2),he=Ee[0],be=Ee[1],ge=Object(c.useState)(""),Oe=Object(h.a)(ge,2),ve=Oe[0],je=Oe[1],Se=Object(c.useState)(),ye=Object(h.a)(Se,2),we=ye[0],xe=ye[1],Ce=Object(c.useState)(),Ie=Object(h.a)(Ce,2),ke=Ie[0],Ne=Ie[1],De=Object(c.useState)(),Te=Object(h.a)(De,2),Pe=(Te[0],Te[1]),Me=Object(c.useState)(),Ae=Object(h.a)(Me,2),_e=(Ae[0],Ae[1]),Re=Object(c.useState)([]),Fe=Object(h.a)(Re,2),Ve=Fe[0],Le=Fe[1],ze=Object(c.useState)(!0),Be=Object(h.a)(ze,2),Ue=Be[0],Ye=Be[1],Je=function(){var e=Object(E.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.a.get("http://52.79.134.9:5000/exam/lists",{}).then((function(e){for(var t=[],a=0;a<e.data.length;a++)t.push(e.data[a].title);te(t),t=[];for(var n=0;n<e.data.length;n++)t.push(e.data[n].sessionID);X(t)})).catch((function(e){return alert(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),qe=function(){var e=Object(E.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.a.get("http://52.79.134.9:5000/exam/get/"+he,{}).then((function(e){console.log(e.data[0].content),se(e.data[0].content),fe(e.data[0].time),xe(e.data[0].file),H(e.data[0].eid)})).catch((function(e){return alert(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ke=o.a.createElement(g.a,{onClick:function(e){var t=e.key;oe(!1),Y(ee[t]),be(Q[t])}},ee.map((function(e,t){return o.a.createElement(g.a.Item,{key:t},e)})));Object(c.useEffect)((function(){return window.addEventListener("beforeunload",He),window.removeEventListener("beforeunload",He)})),Object(c.useEffect)((function(){if(ke){var e=ke;console.log(ke),e.on("streamCreated",(function(e){})),e.on("streamDestroyed",(function(e){We(e.stream.streamManager)})),Qe().then((function(t){e.connect(t,{clientData:ve}).then((function(){var t=n.initPublisher(void 0,{audioSource:void 0,videoSource:"screen",publishAudio:!1,publishVideo:!0,resolution:"640x480",frameRate:30,insertMode:"APPEND",mirror:!1});e.publish(t),Pe(t),_e(t)})).catch((function(e){console.log("There was an error connecting to the session:",e.code,e.message)}))}))}}),[ke]);var He=function(e){Ge()},We=function(e){var t=Ve,a=t.indexOf(e,0);a>-1&&(t.splice(a,1),Le(t))},Ge=function(){ke&&ke.disconnect(),n=null,Ne(),Le([]),be(sessionStorage.getItem("sessionID")),je("Professor"),Pe(void 0),_e(void 0)},Qe=function(){return(e=he,new Promise((function(t,a){var n=JSON.stringify({customSessionId:e});I.a.post("https://localhost:4443/api/sessions",n,{headers:{Authorization:"Basic "+btoa("OPENVIDUAPP:MY_SECRET"),"Content-Type":"application/json"}}).then((function(e){console.log("CREATE SESION",e),t(e.data.id)})).catch((function(a){var n=Object.assign({},a);n.response&&409===n.response.status?t(e):(console.log(n),console.warn("No connection to OpenVidu Server. This may be a certificate error at https://localhost:4443"),window.confirm('No connection to OpenVidu Server. This may be a certificate error at "https://localhost:4443"\n\nClick OK to navigate and accept it. If no certificate warning is shown, then check that your OpenVidu Server is up and running at "https://localhost:4443"')&&window.location.assign("https://localhost:4443/accept-certificate"))}))}))).then((function(e){return function(e){return new Promise((function(t,a){var n=JSON.stringify({session:e});I.a.post("https://localhost:4443/api/tokens",n,{headers:{Authorization:"Basic "+btoa("OPENVIDUAPP:MY_SECRET"),"Content-Type":"application/json"}}).then((function(e){console.log("TOKEN",e),t(e.data.token)})).catch((function(e){return a(e)}))}))}(e)}));var e};return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{style:{backgroundColor:"gray",width:"100vw",height:"100vh",display:"flex",flexDirection:"column",alignContent:"center",justifyContent:"center"}},o.a.createElement(O.a,{visible:l,title:"\uc815\ubcf4 \uc785\ub825",footer:[],centered:!0},o.a.createElement(v.a,{onFinish:function(e){""!==e.sid&&""!==e.sname&&(d(e.sid),T(e.sname),i(!1),L(!0),Je())}},o.a.createElement(v.a.Item,null,o.a.createElement(t,{style:{color:"gray"}},"\uc81c\ucd9c \uc804 \ubc18\ub4dc\uc2dc \uc778\uc801\uc0ac\ud56d\uc744 \ud655\uc778\ud574\uc8fc\uc138\uc694!")),o.a.createElement(v.a.Item,{name:"sid",label:"\ud559\ubc88",rules:[{required:!0,message:"\ud559\ubc88\uc744 \uc785\ub825\ud558\uc138\uc694!"}]},o.a.createElement(j.a,null)),o.a.createElement(v.a.Item,{name:"sname",label:"\uc774\ub984",rules:[{required:!0,message:"\uc774\ub984\uc744 \uc785\ub825\ud558\uc138\uc694!"}]},o.a.createElement(j.a,null)),o.a.createElement(v.a.Item,null,o.a.createElement(S.a,{key:"back",onClick:function(){i(!1)}},"\ucde8\uc18c"),o.a.createElement(S.a,{key:"submit",htmlType:"submit"},"\uc81c\ucd9c")))),!0===V?o.a.createElement("div",{className:"enterexam-background"},o.a.createElement(y.a,{title:"*\uc2dc\ud5d8 \uc120\ud0dd*",bordered:"false",style:{top:"30%",left:"35%",width:500,height:400}},o.a.createElement("p",null,"\uc778\uc801\uc0ac\ud56d"),o.a.createElement("p",null,"\ud559\ubc88 : ",m),o.a.createElement("p",null,"\uc774\ub984 : ",D),o.a.createElement("div",null,o.a.createElement(w.a.Button,{icon:o.a.createElement(x.a,null),overlay:Ke},U)),o.a.createElement("div",{style:{marginTop:20}},o.a.createElement(S.a,{disabled:ce,onClick:function(){qe(),L(!1),_(!0)}},"\uc120\ud0dd")))):" ",!0===A?o.a.createElement("div",{className:"enterexam-background"},o.a.createElement(y.a,{title:"\u203b\uc8fc\uc758\uc0ac\ud56d\u203b",bordered:"false",style:{top:"30%",left:"35%",width:500,height:400}},o.a.createElement("p",null,U),o.a.createElement("p",null,"\uc2dc\ud5d8 \uc2dc\uac04 : ",Math.round(de/60)," \ubd84"),o.a.createElement("p",null,"\ud559\ubc88 : ",m),o.a.createElement("p",null,"\uc774\ub984 : ",D),o.a.createElement("p",null," ",ie),o.a.createElement(S.a,{onClick:function(){je(m+"/"+D),n=new k.OpenVidu,I.a.get("https://localhost:4443/api/sessions/"+he,{headers:{Authorization:"Basic "+btoa("OPENVIDUAPP:MY_SECRET"),"Content-Type":"application/json"}}).then((function(e){Ne(n.initSession()),Ye(!1)})).catch((function(e){return alert("Not yet")}))}},"\ud654\uba74 \uacf5\uc720\ud558\uae30"),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement(S.a,{onClick:function(){N.requestFullscreen(),e.history.push({pathname:"/Examing",search:"",state:{fileName:we,time:de,TestName:U,sName:D,sid:m,eid:K}})},disabled:Ue},"\uc2dc\ud5d8 \uc2dc\uc791"))):" "))},T=a(684),P=a(138),M=a(86),A=a(691),_=a(692),R=a(152);R.c.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/"+R.c.version+"/pdf.worker.js";var F,V,L=function(e){var t=Object(c.useState)(null),a=Object(h.a)(t,2),n=a[0],r=a[1],l=Object(c.useState)(0),i=Object(h.a)(l,2),s=i[0],u=i[1],m=Object(c.useState)("../uploads/pdfs/"+e.location.state.fileName),d=Object(h.a)(m,2),f=d[0];d[1];return o.a.createElement("div",null,o.a.createElement(R.a,{file:f,onLoadSuccess:function(e){var t=e.numPages;r(t),console.log("sucess")}},o.a.createElement(R.b,{pageIndex:s,width:e.wrapperDivSize,scale:1})),o.a.createElement(P.a,null,o.a.createElement(M.a,{span:12},o.a.createElement("div",{className:"site-button-ghost-wrapper"},o.a.createElement(S.a,{onClick:function(){s-1>=0&&u(s-1)},block:!0},o.a.createElement(A.a,null),s))),o.a.createElement(M.a,{span:12},o.a.createElement("div",null,o.a.createElement(S.a,{onClick:function(){s+1<n&&u(s+1)},block:!0},s+1,o.a.createElement(_.a,null))))))},z=function(e){var t=T.a.Countdown,a=Date.now()+1e3*e.location.state.time,n=Object(c.useState)(!1),r=Object(h.a)(n,2),l=r[0],i=r[1],s=function(){console.log("fin"),e.history.push({pathname:"/Examing_fin",state:{sName:e.location.state.sName,sid:e.location.state.sid,eid:e.location.state.eid}})};return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{style:{backgroundColor:"gray",width:"100vw",height:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}},o.a.createElement("div",null,o.a.createElement(O.a,{title:"\uc2dc\ud5d8 \uc870\uae30 \uc885\ub8cc",visible:l,onOk:s,onCancel:function(){i(!1)}},o.a.createElement("p",null,"\uc2dc\ud5d8\uc744 \uc9c0\uae08 \uc885\ub8cc\ud569\ub2c8\uae4c?"))),o.a.createElement("div",null,o.a.createElement(y.a,{title:e.location.state.TestName,bordered:!0,style:{textAlign:"center"}},o.a.createElement(S.a,{style:{height:100},type:"ghost"},o.a.createElement(t,{title:"Countdown",value:a,onFinish:s})),o.a.createElement("div",{style:{float:"right"}},o.a.createElement(S.a,{onClick:function(){i(!0)}},"\uc2dc\ud5d8 \uc870\uae30 \uc885\ub8cc")),o.a.createElement(L,{location:e.location})))))},B=a(679),U=a(688),Y=a(693),J=function(e){var t=T.a.Countdown,a=B.a.Dragger,n=Object(c.useState)([]),r=Object(h.a)(n,2),l=r[0],i=r[1],s=Object(c.useState)([]),u=Object(h.a)(s,2),m=u[0],d=u[1],f=Date.now()+3e5,b={name:"file",multiple:!0,action:"http://52.79.134.9:5000/exam/student/",fileList:l,beforeUpload:function(e){return i(l.concat(e)),!1}},g={name:"file",multiple:!0,action:"http://52.79.134.9:5000/exam/student/",fileList2:m,beforeUpload:function(e){return d(m.concat(e)),!1}},O={eid:e.location.state.eid,sid:e.location.state.sid,sName:e.location.state.sName},v=function(){var t=Object(E.a)(p.a.mark((function t(a){var n,c;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),!(l.length>0&&m.length>0)){t.next=10;break}for(c in n=new FormData,l.forEach((function(e){return n.append("answer",e)})),m.forEach((function(e){return n.append("answer",e)})),O)n.append(c,O[c]);return t.next=8,I.a.post("http://52.79.134.9:5000/exam/student",n,{header:{"Content-Type":"multipart/form-data"}}).then((function(t){"Create_success"===t.data.message?e.hitory.push("/End"):"already sibmit"===t.data.message&&alert("\uc774\ubbf8 \uc81c\ucd9c \ud588\uc2b5\ub2c8\ub2e4!")})).catch((function(e){return alert(e)}));case 8:t.next=11;break;case 10:alert("\ud30c\uc77c\uc744 \ub4f1\ub85d\ud574\uc8fc\uc138\uc694!");case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{style:{backgroundColor:"gray",width:"100vw",height:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}},o.a.createElement("div",null,o.a.createElement(y.a,{title:"\uc2dc\ud5d8 \uc885\ub8cc",style:{textAlign:"center",width:"100%"},actions:[o.a.createElement(S.a,{onClick:v},"\uc81c\ucd9c")]},o.a.createElement(t,{value:f,onFinish:function(){console.log("fin")}}),o.a.createElement("p",null,o.a.createElement("br",null),"\uc218\uace0\ud558\uc168\uc2b5\ub2c8\ub2e4"),o.a.createElement("p",null,"\uc791\uc131\ud55c \ub2f5\uc548\uc9c0\uc640 \ud0c0\uc784\ub7a9\uc2a4 \ud30c\uc77c\uc744 \uc81c\ucd9c\ud574\uc8fc\uc138\uc694"),o.a.createElement(U.b,null,o.a.createElement(a,Object.assign({},b,{onRemove:function(e){var t=[];l.forEach((function(e){t.push(e)})),t.splice(t.indexOf(e),1),i(t)}}),o.a.createElement("p",null,o.a.createElement(Y.a,null)),o.a.createElement("p",null,"\ud0c0\uc784\ub7a9\uc2a4 \ud30c\uc77c\uc744 \ub4dc\ub798\uadf8\ud558\uc5ec \ub4f1\ub85d\ud558\uc138\uc694")),o.a.createElement(a,Object.assign({},g,{onRemove:function(e){var t=[];m.forEach((function(e){t.push(e)})),t.splice(t.indexOf(e),1),d(t)}}),o.a.createElement("p",null,o.a.createElement(Y.a,null)),o.a.createElement("p",null,"\ub2f5\uc548 \ud30c\uc77c\uc744 \ub4dc\ub798\uadf8\ud558\uc5ec \ub4f1\ub85d\ud558\uc138\uc694")))))))},q=(a(574),a(280),a(694)),K=a(695),H=function(e){var t=b.a.Text,a=Object(c.useState)(""),n=Object(h.a)(a,2),r=n[0],l=n[1],s=Object(c.useState)(""),u=Object(h.a)(s,2),m=u[0],d=u[1],f=function(){var t=Object(E.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r||!m){t.next=5;break}return t.next=3,I.a.post("http://52.79.134.9:5000/user/login",{user:r,pass:m},{withCredentials:!0}).then((function(t){console.log(t.data),sessionStorage.setItem("sessionID",t.data.sessionID),sessionStorage.setItem("userID",t.data.userId),sessionStorage.setItem("isLogged",t.data.isLogged),"login success"===t.data.message&&e.history.push("/Main"),console.log(t)})).catch((function(e){return alert(e)}));case 3:t.next=6;break;case 5:alert("input please");case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{style:{backgroundColor:"gray",width:"100vw",height:"100vh",display:"flex",flexDirection:"column",alignItems:"center",alignSelf:"center",justifyContent:"center"}},o.a.createElement("div",{style:{textAlign:"center"}},o.a.createElement(y.a,null,o.a.createElement("div",null,o.a.createElement(t,{style:{fontSize:30,fontWeight:700}},o.a.createElement(q.a,null),"Login")),o.a.createElement("div",{className:"LoginScreen"},o.a.createElement(v.a,null,o.a.createElement(v.a.Item,{name:"username",rules:[{required:!0,message:"\uc544\uc774\ub514\ub97c \uc785\ub825\ud558\uc138\uc694!"}]},o.a.createElement(j.a,{prefix:o.a.createElement(K.a,{className:"site-form-item-icon"}),placeholder:"\uc544\uc774\ub514",value:r,onChange:function(e){l(e.target.value)}})),o.a.createElement(v.a.Item,{name:"password",rules:[{required:!0,message:"\ube44\ubc00\ubc88\ud638\ub97c \uc785\ub825\ud558\uc138\uc694!"}]},o.a.createElement(j.a.Password,{prefix:o.a.createElement(q.a,{className:"site-form-item-icon"}),placeholder:"\ube44\ubc00\ubc88\ud638",value:m,onChange:function(e){d(e.target.value)}})),o.a.createElement(v.a.Item,null,o.a.createElement(S.a,{type:"secondary",htmlType:"submit",className:"LoginBtn",onClick:f},"\ub85c\uadf8\uc778")),o.a.createElement(t,{style:{float:"left"}},"or ",o.a.createElement(i.b,{to:"./Register"},"\ud68c\uc6d0\uac00\uc785")))))),o.a.createElement(i.b,{to:"/EnterExam_Student"},"Goto Exam")))},W=a(700),G=a(675),Q=(a(576),a(696)),X=a(697),Z=a(698),$=a(699),ee=Object(c.memo)((function(){var e=Object(s.f)(),t=[o.a.createElement(Q.a,null),o.a.createElement(X.a,null),o.a.createElement(Z.a,null),o.a.createElement($.a,null)],a=["/Main","/Main/1","/Main/2","/Main/3"],n=Object(c.useState)("0"),r=Object(h.a)(n,2),l=r[0],u=r[1];return Object(c.useEffect)((function(){console.log(e);var t=a.findIndex((function(t){return t===e.pathname}));u(String(t))}),[e]),o.a.createElement(o.a.Fragment,null,o.a.createElement(g.a,{mode:"inline",theme:"dark",selectedKeys:[l]},["\ud648","\uc2dc\ud5d8 \ub4f1\ub85d","\uc2dc\ud5d8\uc7a5 \uc785\uc7a5","\uc2dc\ud5d8\uacb0\uacfc \ud655\uc778"].map((function(e,n){return o.a.createElement(g.a.Item,{key:n,icon:t[n],id:e}," ",o.a.createElement(i.b,{to:a[n]},e))}))))})),te=a(674),ae=a(685),ne=function(){b.a.Title;var e=b.a.Text;return o.a.createElement(o.a.Fragment,null,o.a.createElement(U.b,{style:{paddingTop:20,paddingLeft:20}},o.a.createElement(e,{style:{fontWeight:"bold",fontSize:20}},o.a.createElement(e,{type:"warning"},"Rope"),"\uc5d0 \uc624\uc2e0\uac78 \ud658\uc601\ud569\ub2c8\ub2e4!")),o.a.createElement(te.a,null),o.a.createElement("div",{className:"Content",style:{margin:20}},o.a.createElement(u.a,{status:"404",title:"\uc544\uc9c1 \uac1c\ubc1c\uc911\uc778 \uc791\uc5c5\uc785\ub2c8\ub2e4!",subTitle:"\uc870\uae08 \ub354 \uc644\ubcbd\ud55c \uc11c\ube44\uc2a4\ub97c \uc704\ud574 \uae30\ub2e4\ub824\uc8fc\uc138\uc694"})),o.a.createElement(te.a,null),o.a.createElement("div",{style:{paddingLeft:5,paddingBottom:20},className:"space-align-container"},o.a.createElement(e,{code:!0},"\uc81c\uacf5\uc790"),o.a.createElement(ae.a,{src:"https://lh3.googleusercontent.com/ogw/ADGmqu8uPjReaS9H1M_C5UabkgioDOBDcDFM0E2MGa8H=s83-c-mo"}),o.a.createElement(ae.a,{src:"https://scontent-gmp1-1.xx.fbcdn.net/v/t1.0-9/117035716_3183548191766547_183287540202193355_n.jpg?_nc_cat=104&_nc_sid=09cbfe&_nc_ohc=tT2IyCRyMHAAX-81589&_nc_ht=scontent-gmp1-1.xx&oh=54ec351277fb364144c3ae023eac6673&oe=5F733C8E"})))},ce=a(678),oe=a(351),re=a(101),le=a.n(re),ie=Object(c.memo)((function(e){var t=B.a.Dragger,a=b.a.Text,n=j.a.TextArea,r=ce.a.RangePicker,l=Object(c.useState)([]),s=Object(h.a)(l,2),u=s[0],m=s[1],d=Object(c.useState)(""),f=Object(h.a)(d,2),g=f[0],O=f[1],y=Object(c.useState)(""),w=Object(h.a)(y,2),x=w[0],C=w[1],k=Object(c.useState)(0),N=Object(h.a)(k,2),D=N[0],T=N[1],P=Object(c.useState)(),M=Object(h.a)(P,2),A=M[0],_=M[1],R=Object(c.useState)(!0),F=Object(h.a)(R,2),V=F[0],L=F[1],z=Object(c.useState)([]),U=Object(h.a)(z,2),J=(U[0],U[1]),q={fileName:g,contents:x,time:D,userID:sessionStorage.getItem("userID"),sessionID:sessionStorage.getItem("sessionID"),isLogged:sessionStorage.getItem("isLogged")},K={labelCol:{span:8},wrapperCol:{span:10}},H={wrapperCol:{offset:8,span:4}},W=function(e){e.preventDefault(),O(""),C(""),_(""),m([]),L(!1)},G=function(){var e=Object(E.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n in t.preventDefault(),a=new FormData,u.forEach((function(e){return a.append("files",e)})),q)a.append(n,q[n]);return e.next=6,I.a.post("http://52.79.134.9:5000/api-session/create",a,{header:{"Content-Type":"multipart/form-data"}}).then((function(e){"create_success"===e.data.message&&(alert("\ud30c\uc77c \uc5c5\ub85c\ub4dc \uc131\uacf5!"),W(t)),"create exam fail"===e.data.message&&alert("\uc774\ubbf8 \uc874\uc7ac\ud558\ub294 \ud30c\uc77c\uc785\ub2c8\ub2e4!")})).catch((function(e){return alert(e)}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q={name:"file",multiple:!0,action:"http://52.79.134.9:5000/api-session/create/",beforeUpload:function(e){return m(u.concat(e)),!1},onChange:function(e){var t=e.file.status;"done"===t?oe.b.success("".concat(e.file.name," file uploaded successfully.")):"error"===t&&oe.b.error("".concat(e.file.name," file upload failed."))}};return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",null,o.a.createElement("div",{style:{padding:20}},o.a.createElement(a,{strong:!0,style:{fontSize:20}},"\uc2dc\ud5d8 \ub4f1\ub85d"),o.a.createElement(te.a,null)),o.a.createElement("div",null,o.a.createElement(v.a,null,o.a.createElement(v.a.Item,Object.assign({},K,{label:"\uc2dc\ud5d8 \uc81c\ubaa9"}),o.a.createElement(j.a,{placeholder:"\ub4f1\ub85d\ud560 \uc2dc\ud5d8\uc758 \uc81c\ubaa9\uc744 \uc785\ub825\ud558\uc138\uc694",value:g,onChange:function(e){O(e.target.value)}})),o.a.createElement(v.a.Item,Object.assign({},K,{label:"\uc2dc\ud5d8 \uc8fc\uc758\uc0ac\ud56d"}),o.a.createElement(n,{rows:4,placeholder:"\uc2dc\ud5d8\uc2dc \uc8fc\uc758 \uc0ac\ud56d\uc744 \uc785\ub825\ud574 \uc8fc\uc138\uc694",value:x,onChange:function(e){C(e.target.value)}})),o.a.createElement(v.a.Item,Object.assign({},K,{label:"\uc2dc\ud5d8 \uc2dc\uac04"}),o.a.createElement(r,{order:"true",onChange:function(e,t){_(e),J(t),T(Math.round(le.a.duration(e[1].diff(e[0])).asSeconds())),console.log(t)},value:A})),o.a.createElement(v.a.Item,Object.assign({},K,{label:"\ubb38\uc81c \ud30c\uc77c"}),o.a.createElement(t,Object.assign({},Q,{onRemove:function(e){console.log(e);var t=[];u.forEach((function(e){t.push(e)})),t.splice(t.indexOf(e),1),m(t)}}),o.a.createElement("p",null,o.a.createElement(Y.a,null)),o.a.createElement("p",null,"\uc774\uacf3\uc5d0 \ud30c\uc77c\uc744 \ub4dc\ub798\uadf8\ud558\uc5ec \ub4f1\ub85d\ud558\uc138\uc694"))),o.a.createElement(v.a.Item,H,o.a.createElement(S.a,{onClick:function(e){G(e)},disabled:!V},"\ub4f1\ub85d")),o.a.createElement(v.a.Item,H,o.a.createElement(S.a,{style:{marginBottom:30},onClick:W,disabled:V},o.a.createElement(i.b,{to:"/Main/2"},"\uc2dc\ud5d8 \uc2dc\uc791")))))))})),se=a(347),ue=function(e){var t=Object(c.useRef)();return Object(c.useEffect)((function(){e.streamManager&&e.index&&e.index>0&&e.streamManager[e.index-1].addVideoElement(t.current)}),[]),o.a.createElement(o.a.Fragment,null,e.index>0?o.a.createElement("video",{autoPlay:!0,ref:t}):null)},me=function(e){var t=Object(c.useState)(),a=Object(h.a)(t,2),n=a[0],r=a[1];return Object(c.useEffect)((function(){console.log(e.index),e.index>0&&r(JSON.parse(e.streamManager[e.index-1].stream.connection.data).clientData)}),[n]),o.a.createElement(o.a.Fragment,null,o.a.createElement("div",null,void 0!==e.streamManager?o.a.createElement("div",{className:"streamcomponent"},o.a.createElement(ue,{streamManager:e.streamManager,index:e.index}),o.a.createElement("div",null,o.a.createElement("p",null,n))):null))},de=function(e){var t=Object(c.useState)(sessionStorage.getItem("sessionID")),a=Object(h.a)(t,2),n=a[0],r=a[1],l=Object(c.useState)("Professor"),i=Object(h.a)(l,2),s=i[0],u=i[1],m=Object(c.useState)(),d=Object(h.a)(m,2),f=d[0],p=d[1],E=Object(c.useState)(),b=Object(h.a)(E,2),g=b[0],O=b[1],v=Object(c.useState)(),j=Object(h.a)(v,2),y=(j[0],j[1]),w=Object(c.useState)([]),x=Object(h.a)(w,2),C=x[0],N=x[1];Object(c.useEffect)((function(){return window.addEventListener("beforeunload",D),window.removeEventListener("beforeunload",D)})),Object(c.useEffect)((function(){if(f){var e=f;e.on("streamCreated",(function(t){var a=e.subscribe(t.stream,void 0),n=C;n.push(a),N([].concat(Object(se.a)(C),[n]))})),e.on("streamDestroyed",(function(e){T(e.stream.streamManager)})),M().then((function(t){e.connect(t,{clientData:s}).then((function(){var t=F.initPublisher(void 0,{audioSource:void 0,videoSource:void 0,publishAudio:!1,publishVideo:!0,resolution:"640x480",frameRate:30,insertMode:"APPEND",mirror:!1});e.publish(t),O(t),y(t),console.log(f)})).catch((function(e){console.log("There was an error connecting to the session:",e.code,e.message)}))}))}}),[f]);var D=function(e){P()},T=function(e){var t=C,a=t.indexOf(e,0);a>-1&&(t.splice(a,1),N(t))},P=function(){f&&I.a.delete("https://localhost:4443/api/sessions/"+n,{headers:{Authorization:"Basic "+btoa("OPENVIDUAPP:MY_SECRET"),"Content-Type":"application/json"}}).then((function(e){console.log(e)})).catch((function(e){return console.log(e)})),F=null,p(),N([]),r(sessionStorage.getItem("sessionID")),u("Professor"),O(void 0),y(void 0)},M=function(){return(e=n,new Promise((function(t,a){var n=JSON.stringify({customSessionId:e});I.a.post("https://localhost:4443/api/sessions",n,{headers:{Authorization:"Basic "+btoa("OPENVIDUAPP:MY_SECRET"),"Content-Type":"application/json"}}).then((function(e){console.log("CREATE SESION",e),t(e.data.id)})).catch((function(a){var n=Object.assign({},a);n.response&&409===n.response.status?t(e):(console.log(n),console.warn("No connection to OpenVidu Server. This may be a certificate error at https://localhost:4443"),window.confirm('No connection to OpenVidu Server. This may be a certificate error at "https://localhost:4443"\n\nClick OK to navigate and accept it. If no certificate warning is shown, then check that your OpenVidu Server is up and running at "https://localhost:4443"')&&window.location.assign("https://localhost:4443/accept-certificate"))}))}))).then((function(e){return function(e){return new Promise((function(t,a){var n=JSON.stringify({session:e});I.a.post("https://localhost:4443/api/tokens",n,{headers:{Authorization:"Basic "+btoa("OPENVIDUAPP:MY_SECRET"),"Content-Type":"application/json"}}).then((function(e){console.log("TOKEN",e),t(e.data.token)})).catch((function(e){return a(e)}))}))}(e)}));var e};return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignSelf:"center",alignItems:"center"}},o.a.createElement("div",{id:"check"},o.a.createElement(S.a,{onClick:function(){F=new k.OpenVidu,p(F.initSession())},style:{}},"\uc138\uc158 \uc5f4\uae30 ")),o.a.createElement("div",{id:"session"},void 0!==f?o.a.createElement("div",{id:"session"},o.a.createElement("div",{id:"session-header",style:{textAlign:"center"}},o.a.createElement("h1",{id:"session-title"},n),o.a.createElement(S.a,{type:"button",id:"buttonLeaveSession",onClick:P,value:"Leave session"},"\uc138\uc158 \ub2eb\uae30")),o.a.createElement("div",{id:"video-container"},C.map((function(e,t){return o.a.createElement("div",{key:t,onClick:function(){var t;g!==(t=e)&&O(t)}},o.a.createElement(me,{streamManager:e,index:t}))})))):null)))},fe=a(677),pe=(a(583),function(){var e=Object(c.useState)(0),t=Object(h.a)(e,2),a=t[0],n=t[1],r=Object(c.useState)(sessionStorage.getItem("sessionID")),l=Object(h.a)(r,2),i=l[0],s=(l[1],Object(c.useState)(!1)),u=Object(h.a)(s,2),m=u[0],d=u[1],f=Object(c.useState)([]),b=Object(h.a)(f,2),g=b[0],O=b[1],v=function(){var e=Object(E.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.a.get("http://52.79.134.9:5000/exam/get/"+i,{}).then((function(e){console.log(e.data[0].content),n(e.data[0].eid)})).catch((function(e){return alert(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(e){var t=[];e.map((function(e,a){t.push({key:a,sid:e.sid,name:e.sName,time:e.cam_file,answer:e.result_file})})),console.log(t),O(t)},y=function(){var e=Object(E.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(a),e.next=3,I.a.get("http://52.79.134.9:5000/exam/result/"+a,{}).then((function(e){console.log(e.data),"there is no student"===e.data.message?alert("\ud559\uc0dd\uc774 \uc874\uc7ac\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4!"):(d(!0),j(e.data))})).catch((function(e){return alert(e)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=[{title:"\ud559\ubc88",dataIndex:"sid",width:150,align:"center"},{title:"\uc774\ub984",dataIndex:"name",width:150,align:"center"},{title:"\ud0c0\uc784\ub7a9\uc2a4",dataIndex:"time",width:150,align:"center",render:function(e){return o.a.createElement("a",{href:"/uploads/answers/"+e,download:!0},e)}},{title:"\ub2f5\uc548\ud30c\uc77c",dataIndex:"answer",width:150,align:"center",render:function(e){return o.a.createElement("a",{href:"/uploads/answers/"+e,download:!0},e)}}];return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{style:{flexDirection:"column",alignItems:"center"}},o.a.createElement(S.a,{onClick:function(){v()}},"\ub370\uc774\ud130 \uc5f0\ub3d9"),o.a.createElement(S.a,{onClick:function(){0===a?alert("\uc2dc\ud5d8 \ub370\uc774\ud130\uc640 \uc5f0\ub3d9\uc744 \uba3c\uc800\ud574\uc8fc\uc138\uc694!"):y()}},"\uc2dc\ud5d8 \uacb0\uacfc \uc870\ud68c"),m?o.a.createElement("div",{style:{margin:15}},o.a.createElement(fe.a,{columns:w,pagination:{pageSize:50},scroll:{y:240},dataSource:g})):null))}),Ee=function(e){var t=e.match,a=(e.location,e.history),n=Object(c.useState)([]),r=Object(h.a)(n,2),l=(r[0],r[1],G.a.Header),u=G.a.Footer,m=G.a.Sider,d=G.a.Content,f=(g.a.SubMenu,b.a.Title,b.a.Text),O=Object(c.useState)(!1),v=Object(h.a)(O,2),j=v[0],y=v[1],w=function(){var e=Object(E.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.a.post("http://52.79.134.9:5000/user/logout",{},{withCredentials:!0}).then((function(e){sessionStorage.setItem("sessionID",void 0),sessionStorage.setItem("userID",void 0),sessionStorage.setItem("isLogged",!1),a.push("/")}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return o.a.createElement(o.a.Fragment,null,o.a.createElement(G.a,{style:{minHeight:"100vh"}},o.a.createElement(l,null,o.a.createElement(f,{className:"Logo"},o.a.createElement(i.b,{to:"/Main",style:{color:"white"}},o.a.createElement(W.a,null),"Rope")),o.a.createElement(f,{className:"subLogo"},"\xa0 @Rude_zoo @hyowii"),o.a.createElement(S.a,{id:"logoutbtn",type:"primary",onClick:w},"Logout")),o.a.createElement(G.a,null,o.a.createElement(m,{collapsible:!0,collapsed:j,onCollapse:function(){console.log(j),y(!0!==j)}},o.a.createElement(ee,{match:t})),o.a.createElement(G.a,null,o.a.createElement(d,{className:"Site-Content"},o.a.createElement("div",{className:"site-layout-content"},o.a.createElement(s.a,{exact:!0,path:t.path,component:ne}),o.a.createElement(s.a,{path:"".concat(t.path,"/1"),component:ie}),o.a.createElement(s.a,{path:"".concat(t.path,"/2"),component:de}),o.a.createElement(s.a,{path:"".concat(t.path,"/3"),component:pe}))),o.a.createElement(u,{style:{textAlign:"center"}},"Web Design \xa92020 Created by Rude zoo")))))},he=Object(c.memo)((function(e){var t=b.a.Text,a=Object(c.useState)(""),n=Object(h.a)(a,2),r=n[0],l=n[1],s=Object(c.useState)(""),u=Object(h.a)(s,2),m=u[0],d=u[1],f=Object(c.useState)(""),g=Object(h.a)(f,2),O=g[0],w=g[1],x=Object(c.useState)([]),C=Object(h.a)(x,2),k=(C[0],C[1],Object(c.useState)("")),N=Object(h.a)(k,2),D=N[0],T=N[1],P=Object(c.useState)(""),M=Object(h.a)(P,2),_=M[0],R=M[1],F=Object(c.useState)(""),V=Object(h.a)(F,2),L=V[0],z=V[1],B=Object(c.useState)(""),Y=Object(h.a)(B,2),J=Y[0],q=Y[1],K=Object(c.useState)(""),H=Object(h.a)(K,2),W=H[0],G=H[1],Q=Object(c.useState)(""),X=Object(h.a)(Q,2),Z=X[0],$=X[1],ee=Object(c.useState)(""),ae=Object(h.a)(ee,2),ne=ae[0],ce=ae[1],oe={labelCol:{span:8},wrapperCol:{span:10}},re={wrapperCol:{offset:8,span:10}},le=function(){var t=Object(E.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return q(""===D?"\uc544\uc774\ub514\ub97c \uc785\ub825\ud558\uc138\uc694!":""),G(""===r?"\ube44\ubc00\ubc88\ud638\ub97c \uc785\ub825\ud558\uc138\uc694!":""),$(""===_?"\uc774\ub984 \uc785\ub825\ud558\uc138\uc694!":""),ce(""===L?"\uc774\uba54\uc77c\uc744 \uc785\ub825\ud558\uc138\uc694!":""),t.next=6,I.a.post("http://52.79.134.9:5000/user/join",{userId:D,pass:r,email:L,name:_},{withCredentials:!0}).then((function(t){"join fail"===t.data.message&&alert("\uc774\ubbf8 \ub4f1\ub85d\ub41c \uc0ac\uc6a9\uc790\uc785\ub2c8\ub2e4"),"join success"===t.data.message&&(alert("\uac00\uc785\uc131\uacf5!"),e.history.push("/"))}));case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(c.useEffect)((function(){""!==r&&""!==m&&(m===r?w("\uc704\uc640 \uc77c\uce58\ud569\ub2c8\ub2e4"):(console.log(r),console.log(m),w("\uc704\uc640 \uc77c\uce58\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4")))}),[r,m]),o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{style:{backgroundColor:"gray",width:"100vw",height:"100vh",display:"flex",flexDirection:"column",alignItems:"center",alignSelf:"center",justifyContent:"center"}},o.a.createElement(y.a,{style:{width:"40%"}},o.a.createElement("div",{style:{padding:20}},o.a.createElement(t,{style:{fontSize:25,color:"#120338"}},o.a.createElement(i.b,{to:"/",style:{color:"black"}},o.a.createElement(A.a,null)),"\xa0 \ud68c\uc6d0\uac00\uc785"),o.a.createElement(te.a,null)),o.a.createElement("div",{className:"SignupForm"},o.a.createElement(v.a,{style:{}},o.a.createElement(v.a.Item,Object.assign({},oe,{label:"\uc544\uc774\ub514"}),o.a.createElement(U.b,null,o.a.createElement(j.a,{placeholder:"\uc544\uc774\ub514\ub97c \uc785\ub825\ud558\uc138\uc694",value:D,onChange:function(e){T(e.target.value)}})),o.a.createElement("div",{style:{color:"red"}},J)),o.a.createElement(v.a.Item,Object.assign({},oe,{label:"\ud328\uc2a4\uc6cc\ub4dc"}),o.a.createElement(j.a.Password,{placeholder:"\ud328\uc2a4\uc6cc\ub4dc\ub97c \uc785\ub825\ud558\uc138\uc694",onChange:function(e){l(e.target.value)},value:r}),o.a.createElement("div",{style:{color:"red"}},W)),o.a.createElement(v.a.Item,Object.assign({},oe,{label:"\ud328\uc2a4\uc6cc\ub4dc \ud655\uc778"}),o.a.createElement(j.a.Password,{placeholder:"\uc704\uc5d0 \uc791\uc131\ud55c \ud328\uc2a4\uc6cc\ub4dc\ub97c \uc785\ub825\ud558\uc138\uc694",onChange:function(e){d(e.target.value)},value:m}),O),o.a.createElement(v.a.Item,Object.assign({},oe,{label:"\uc774\ub984"}),o.a.createElement(j.a,{placeholder:"\uc774\ub984\uc744 \uc785\ub825\ud558\uc138\uc694",value:_,onChange:function(e){R(e.target.value)}}),o.a.createElement("div",{style:{color:"red"}},Z)),o.a.createElement(v.a.Item,Object.assign({},oe,{label:"\uc774\uba54\uc77c"}),o.a.createElement(j.a,{placeholder:"\uc774\uba54\uc77c\uc744 \uc785\ub825\ud558\uc138\uc694",value:L,onChange:function(e){z(e.target.value)}}),o.a.createElement("div",{style:{color:"red"}},ne)),o.a.createElement(v.a.Item,re,o.a.createElement(S.a,{size:"large",type:"secondary",htmlType:"submit",className:"LoginBtn",onClick:le,style:{marginBottom:30,width:"100%"}},"\uac00\uc785")))))))})),be=(a(638),void 0),ge=function(e){var t=Object(c.useState)("EQ0vMvWlTNQcqDYEe73E8mU9AIAOpXka"),a=Object(h.a)(t,2),n=a[0],r=a[1],l=Object(c.useState)(e.location.state.Id),i=Object(h.a)(l,2),s=i[0],u=i[1],m=Object(c.useState)(),d=Object(h.a)(m,2),f=(d[0],d[1],Object(c.useState)()),p=Object(h.a)(f,2),E=p[0],b=p[1],g=Object(c.useState)(),O=Object(h.a)(g,2),v=(O[0],O[1]),j=Object(c.useState)(),S=Object(h.a)(j,2),y=S[0],w=S[1],x=Object(c.useState)([]),C=Object(h.a)(x,2),N=C[0],D=C[1];Object(c.useEffect)((function(){return console.log(s),window.addEventListener("beforeunload",T),window.removeEventListener("beforeunload",T)})),Object(c.useEffect)((function(){if(E){var e=E;console.log(E),e.on("streamCreated",(function(e){})),e.on("streamDestroyed",(function(e){P(e.stream.streamManager)})),A().then((function(t){e.connect(t,{clientData:s}).then((function(){var t=V.initPublisher(void 0,{audioSource:void 0,videoSource:"screen",publishAudio:!1,publishVideo:!0,resolution:"640x480",frameRate:30,insertMode:"APPEND",mirror:!1});e.publish(t),v(t),w(t)})).catch((function(e){console.log("There was an error connecting to the session:",e.code,e.message)}))}))}}),[E]);var T=function(e){M()},P=function(e){var t=N,a=t.indexOf(e,0);a>-1&&(t.splice(a,1),D(t))},M=function(){E&&E.disconnect(),V=null,b(),D([]),r(sessionStorage.getItem("sessionID")),u("Professor"),v(void 0),w(void 0)},A=function(){return(e=n,new Promise((function(t,a){var n=JSON.stringify({customSessionId:e});I.a.post("https://192.168.99.100:4443/api/sessions",n,{headers:{Authorization:"Basic "+btoa("OPENVIDUAPP:MY_SECRET"),"Content-Type":"application/json"}}).then((function(e){console.log("CREATE SESION",e),t(e.data.id)})).catch((function(a){var n=Object.assign({},a);n.response&&409===n.response.status?t(e):(console.log(n),console.warn("No connection to OpenVidu Server. This may be a certificate error at https://192.168.99.100:4443"),window.confirm('No connection to OpenVidu Server. This may be a certificate error at "https://192.168.99.100:4443"\n\nClick OK to navigate and accept it. If no certificate warning is shown, then check that your OpenVidu Server is up and running at "https://192.168.99.100:4443"')&&window.location.assign("https://192.168.99.100:4443/accept-certificate"))}))}))).then((function(e){return function(e){return new Promise((function(t,a){var n=JSON.stringify({session:e});I.a.post("https://192.168.99.100:4443/api/tokens",n,{headers:{Authorization:"Basic "+btoa("OPENVIDUAPP:MY_SECRET"),"Content-Type":"application/json"}}).then((function(e){console.log("TOKEN",e),t(e.data.token)})).catch((function(e){return a(e)}))}))}(e)}));var e};return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",null,o.a.createElement("div",{id:"check"},o.a.createElement("button",{onClick:function(){V=new k.OpenVidu,I.a.get("https://192.168.99.100:4443/api/sessions/"+n,{headers:{Authorization:"Basic "+btoa("OPENVIDUAPP:MY_SECRET"),"Content-Type":"application/json"}}).then((function(e){b(V.initSession())})).catch((function(e){return alert("Not yet")}))}},"click")),void 0!==y?o.a.createElement("div",{className:"stream-container col-md-6 col-xs-6",onClick:function(){return be.handleMainVideoStream(y)}}):null))},Oe=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(i.a,null,o.a.createElement(s.c,null,o.a.createElement(s.a,{exact:!0,path:"/",component:H}),o.a.createElement(s.a,{path:"/Main",component:Ee}),o.a.createElement(s.a,{path:"/Register",component:he}),o.a.createElement(s.a,{path:"/Examing",component:z}),o.a.createElement(s.a,{path:"/EnterExam_Student",component:D}),o.a.createElement(s.a,{path:"/Sharing",component:ge}),o.a.createElement(s.a,{path:"/Examing_fin",component:J}),o.a.createElement(s.a,{path:"/End",component:d}))))};l.a.render(o.a.createElement("div",null,o.a.createElement(Oe,null)),document.getElementById("root"))}},[[357,1,2]]]);
//# sourceMappingURL=main.f38d9468.chunk.js.map